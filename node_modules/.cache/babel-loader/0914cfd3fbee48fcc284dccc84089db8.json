{"ast":null,"code":"\"use strict\";\n\nvar _createClass = require(\"D:/Bakery/Bakery_ReactjsSourceCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"D:/Bakery/Bakery_ReactjsSourceCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"D:/Bakery/Bakery_ReactjsSourceCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _classCallCheck = require(\"D:/Bakery/Bakery_ReactjsSourceCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _defineProperty = require(\"D:/Bakery/Bakery_ReactjsSourceCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _tokenParsers;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _jsbi = _interopRequireDefault(require(\"jsbi\"));\n\nvar _readableStream = require(\"readable-stream\");\n\nvar _token = require(\"./token\");\n\nvar _colmetadataTokenParser = _interopRequireDefault(require(\"./colmetadata-token-parser\"));\n\nvar _doneTokenParser = require(\"./done-token-parser\");\n\nvar _envChangeTokenParser = _interopRequireDefault(require(\"./env-change-token-parser\"));\n\nvar _infoerrorTokenParser = require(\"./infoerror-token-parser\");\n\nvar _fedauthInfoParser = _interopRequireDefault(require(\"./fedauth-info-parser\"));\n\nvar _featureExtAckParser = _interopRequireDefault(require(\"./feature-ext-ack-parser\"));\n\nvar _loginackTokenParser = _interopRequireDefault(require(\"./loginack-token-parser\"));\n\nvar _orderTokenParser = _interopRequireDefault(require(\"./order-token-parser\"));\n\nvar _returnstatusTokenParser = _interopRequireDefault(require(\"./returnstatus-token-parser\"));\n\nvar _returnvalueTokenParser = _interopRequireDefault(require(\"./returnvalue-token-parser\"));\n\nvar _rowTokenParser = _interopRequireDefault(require(\"./row-token-parser\"));\n\nvar _nbcrowTokenParser = _interopRequireDefault(require(\"./nbcrow-token-parser\"));\n\nvar _sspiTokenParser = _interopRequireDefault(require(\"./sspi-token-parser\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar tokenParsers = (_tokenParsers = {}, _defineProperty(_tokenParsers, _token.TYPE.COLMETADATA, _colmetadataTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.DONE, _doneTokenParser.doneParser), _defineProperty(_tokenParsers, _token.TYPE.DONEINPROC, _doneTokenParser.doneInProcParser), _defineProperty(_tokenParsers, _token.TYPE.DONEPROC, _doneTokenParser.doneProcParser), _defineProperty(_tokenParsers, _token.TYPE.ENVCHANGE, _envChangeTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.ERROR, _infoerrorTokenParser.errorParser), _defineProperty(_tokenParsers, _token.TYPE.FEDAUTHINFO, _fedauthInfoParser.default), _defineProperty(_tokenParsers, _token.TYPE.FEATUREEXTACK, _featureExtAckParser.default), _defineProperty(_tokenParsers, _token.TYPE.INFO, _infoerrorTokenParser.infoParser), _defineProperty(_tokenParsers, _token.TYPE.LOGINACK, _loginackTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.ORDER, _orderTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.RETURNSTATUS, _returnstatusTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.RETURNVALUE, _returnvalueTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.ROW, _rowTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.NBCROW, _nbcrowTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.SSPI, _sspiTokenParser.default), _tokenParsers);\n\nvar EndOfMessageMarker = function EndOfMessageMarker() {\n  _classCallCheck(this, EndOfMessageMarker);\n};\n\nvar Parser = /*#__PURE__*/function (_readableStream$Trans) {\n  _inherits(Parser, _readableStream$Trans);\n\n  var _super = _createSuper(Parser);\n\n  function Parser(debug, options) {\n    var _this;\n\n    _classCallCheck(this, Parser);\n\n    _this = _super.call(this, {\n      objectMode: true\n    });\n    _this.debug = void 0;\n    _this.colMetadata = void 0;\n    _this.options = void 0;\n    _this.endOfMessageMarker = void 0;\n    _this.buffer = void 0;\n    _this.position = void 0;\n    _this.suspended = void 0;\n    _this.next = void 0;\n    _this.debug = debug;\n    _this.colMetadata = [];\n    _this.options = options;\n    _this.endOfMessageMarker = new EndOfMessageMarker();\n    _this.buffer = Buffer.alloc(0);\n    _this.position = 0;\n    _this.suspended = false;\n    _this.next = undefined;\n    return _this;\n  }\n\n  _createClass(Parser, [{\n    key: \"_transform\",\n    value: function _transform(input, _encoding, done) {\n      if (input instanceof EndOfMessageMarker) {\n        return done(undefined, new _token.EndOfMessageToken());\n      }\n\n      if (this.position === this.buffer.length) {\n        this.buffer = input;\n      } else {\n        this.buffer = Buffer.concat([this.buffer.slice(this.position), input]);\n      }\n\n      this.position = 0;\n\n      if (this.suspended) {\n        // Unsuspend and continue from where ever we left off.\n        this.suspended = false;\n        var next = this.next;\n        next();\n      } // If we're no longer suspended, parse new tokens\n\n\n      if (!this.suspended) {\n        // Start the parser\n        this.parseTokens();\n      }\n\n      done();\n    }\n  }, {\n    key: \"parseTokens\",\n    value: function parseTokens() {\n      var _this2 = this;\n\n      var doneParsing = function doneParsing(token) {\n        if (token) {\n          if (token instanceof _token.ColMetadataToken) {\n            _this2.colMetadata = token.columns;\n          }\n\n          _this2.push(token);\n        }\n      };\n\n      while (!this.suspended && this.position + 1 <= this.buffer.length) {\n        var type = this.buffer.readUInt8(this.position);\n        this.position += 1;\n\n        if (tokenParsers[type]) {\n          tokenParsers[type](this, this.options, doneParsing);\n        } else {\n          this.emit('error', new Error('Unknown type: ' + type));\n        }\n      }\n    }\n  }, {\n    key: \"suspend\",\n    value: function suspend(next) {\n      this.suspended = true;\n      this.next = next;\n    }\n  }, {\n    key: \"awaitData\",\n    value: function awaitData(length, callback) {\n      var _this3 = this;\n\n      if (this.position + length <= this.buffer.length) {\n        callback();\n      } else {\n        this.suspend(function () {\n          _this3.awaitData(length, callback);\n        });\n      }\n    }\n  }, {\n    key: \"readInt8\",\n    value: function readInt8(callback) {\n      var _this4 = this;\n\n      this.awaitData(1, function () {\n        var data = _this4.buffer.readInt8(_this4.position);\n\n        _this4.position += 1;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt8\",\n    value: function readUInt8(callback) {\n      var _this5 = this;\n\n      this.awaitData(1, function () {\n        var data = _this5.buffer.readUInt8(_this5.position);\n\n        _this5.position += 1;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt16LE\",\n    value: function readInt16LE(callback) {\n      var _this6 = this;\n\n      this.awaitData(2, function () {\n        var data = _this6.buffer.readInt16LE(_this6.position);\n\n        _this6.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt16BE\",\n    value: function readInt16BE(callback) {\n      var _this7 = this;\n\n      this.awaitData(2, function () {\n        var data = _this7.buffer.readInt16BE(_this7.position);\n\n        _this7.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt16LE\",\n    value: function readUInt16LE(callback) {\n      var _this8 = this;\n\n      this.awaitData(2, function () {\n        var data = _this8.buffer.readUInt16LE(_this8.position);\n\n        _this8.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt16BE\",\n    value: function readUInt16BE(callback) {\n      var _this9 = this;\n\n      this.awaitData(2, function () {\n        var data = _this9.buffer.readUInt16BE(_this9.position);\n\n        _this9.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt32LE\",\n    value: function readInt32LE(callback) {\n      var _this10 = this;\n\n      this.awaitData(4, function () {\n        var data = _this10.buffer.readInt32LE(_this10.position);\n\n        _this10.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt32BE\",\n    value: function readInt32BE(callback) {\n      var _this11 = this;\n\n      this.awaitData(4, function () {\n        var data = _this11.buffer.readInt32BE(_this11.position);\n\n        _this11.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt32LE\",\n    value: function readUInt32LE(callback) {\n      var _this12 = this;\n\n      this.awaitData(4, function () {\n        var data = _this12.buffer.readUInt32LE(_this12.position);\n\n        _this12.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt32BE\",\n    value: function readUInt32BE(callback) {\n      var _this13 = this;\n\n      this.awaitData(4, function () {\n        var data = _this13.buffer.readUInt32BE(_this13.position);\n\n        _this13.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readBigInt64LE\",\n    value: function readBigInt64LE(callback) {\n      var _this14 = this;\n\n      this.awaitData(8, function () {\n        var result = _jsbi.default.add(_jsbi.default.leftShift(_jsbi.default.BigInt(_this14.buffer[_this14.position + 4] + _this14.buffer[_this14.position + 5] * Math.pow(2, 8) + _this14.buffer[_this14.position + 6] * Math.pow(2, 16) + (_this14.buffer[_this14.position + 7] << 24) // Overflow\n        ), _jsbi.default.BigInt(32)), _jsbi.default.BigInt(_this14.buffer[_this14.position] + _this14.buffer[_this14.position + 1] * Math.pow(2, 8) + _this14.buffer[_this14.position + 2] * Math.pow(2, 16) + _this14.buffer[_this14.position + 3] * Math.pow(2, 24)));\n\n        _this14.position += 8;\n        callback(result);\n      });\n    }\n  }, {\n    key: \"readInt64LE\",\n    value: function readInt64LE(callback) {\n      var _this15 = this;\n\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this15.buffer.readInt32LE(_this15.position + 4) + ((_this15.buffer[_this15.position + 4] & 0x80) === 0x80 ? 1 : -1) * _this15.buffer.readUInt32LE(_this15.position);\n\n        _this15.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt64BE\",\n    value: function readInt64BE(callback) {\n      var _this16 = this;\n\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this16.buffer.readInt32BE(_this16.position) + ((_this16.buffer[_this16.position] & 0x80) === 0x80 ? 1 : -1) * _this16.buffer.readUInt32BE(_this16.position + 4);\n\n        _this16.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readBigUInt64LE\",\n    value: function readBigUInt64LE(callback) {\n      var _this17 = this;\n\n      this.awaitData(8, function () {\n        var low = _jsbi.default.BigInt(_this17.buffer.readUInt32LE(_this17.position));\n\n        var high = _jsbi.default.BigInt(_this17.buffer.readUInt32LE(_this17.position + 4));\n\n        _this17.position += 8;\n        callback(_jsbi.default.add(low, _jsbi.default.leftShift(high, _jsbi.default.BigInt(32))));\n      });\n    }\n  }, {\n    key: \"readUInt64LE\",\n    value: function readUInt64LE(callback) {\n      var _this18 = this;\n\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this18.buffer.readUInt32LE(_this18.position + 4) + _this18.buffer.readUInt32LE(_this18.position);\n\n        _this18.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt64BE\",\n    value: function readUInt64BE(callback) {\n      var _this19 = this;\n\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this19.buffer.readUInt32BE(_this19.position) + _this19.buffer.readUInt32BE(_this19.position + 4);\n\n        _this19.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readFloatLE\",\n    value: function readFloatLE(callback) {\n      var _this20 = this;\n\n      this.awaitData(4, function () {\n        var data = _this20.buffer.readFloatLE(_this20.position);\n\n        _this20.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readFloatBE\",\n    value: function readFloatBE(callback) {\n      var _this21 = this;\n\n      this.awaitData(4, function () {\n        var data = _this21.buffer.readFloatBE(_this21.position);\n\n        _this21.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readDoubleLE\",\n    value: function readDoubleLE(callback) {\n      var _this22 = this;\n\n      this.awaitData(8, function () {\n        var data = _this22.buffer.readDoubleLE(_this22.position);\n\n        _this22.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readDoubleBE\",\n    value: function readDoubleBE(callback) {\n      var _this23 = this;\n\n      this.awaitData(8, function () {\n        var data = _this23.buffer.readDoubleBE(_this23.position);\n\n        _this23.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt24LE\",\n    value: function readUInt24LE(callback) {\n      var _this24 = this;\n\n      this.awaitData(3, function () {\n        var low = _this24.buffer.readUInt16LE(_this24.position);\n\n        var high = _this24.buffer.readUInt8(_this24.position + 2);\n\n        _this24.position += 3;\n        callback(low | high << 16);\n      });\n    }\n  }, {\n    key: \"readUInt40LE\",\n    value: function readUInt40LE(callback) {\n      var _this25 = this;\n\n      this.awaitData(5, function () {\n        var low = _this25.buffer.readUInt32LE(_this25.position);\n\n        var high = _this25.buffer.readUInt8(_this25.position + 4);\n\n        _this25.position += 5;\n        callback(0x100000000 * high + low);\n      });\n    }\n  }, {\n    key: \"readUNumeric64LE\",\n    value: function readUNumeric64LE(callback) {\n      var _this26 = this;\n\n      this.awaitData(8, function () {\n        var low = _this26.buffer.readUInt32LE(_this26.position);\n\n        var high = _this26.buffer.readUInt32LE(_this26.position + 4);\n\n        _this26.position += 8;\n        callback(0x100000000 * high + low);\n      });\n    }\n  }, {\n    key: \"readUNumeric96LE\",\n    value: function readUNumeric96LE(callback) {\n      var _this27 = this;\n\n      this.awaitData(12, function () {\n        var dword1 = _this27.buffer.readUInt32LE(_this27.position);\n\n        var dword2 = _this27.buffer.readUInt32LE(_this27.position + 4);\n\n        var dword3 = _this27.buffer.readUInt32LE(_this27.position + 8);\n\n        _this27.position += 12;\n        callback(dword1 + 0x100000000 * dword2 + 0x100000000 * 0x100000000 * dword3);\n      });\n    }\n  }, {\n    key: \"readUNumeric128LE\",\n    value: function readUNumeric128LE(callback) {\n      var _this28 = this;\n\n      this.awaitData(16, function () {\n        var dword1 = _this28.buffer.readUInt32LE(_this28.position);\n\n        var dword2 = _this28.buffer.readUInt32LE(_this28.position + 4);\n\n        var dword3 = _this28.buffer.readUInt32LE(_this28.position + 8);\n\n        var dword4 = _this28.buffer.readUInt32LE(_this28.position + 12);\n\n        _this28.position += 16;\n        callback(dword1 + 0x100000000 * dword2 + 0x100000000 * 0x100000000 * dword3 + 0x100000000 * 0x100000000 * 0x100000000 * dword4);\n      });\n    } // Variable length data\n\n  }, {\n    key: \"readBuffer\",\n    value: function readBuffer(length, callback) {\n      var _this29 = this;\n\n      this.awaitData(length, function () {\n        var data = _this29.buffer.slice(_this29.position, _this29.position + length);\n\n        _this29.position += length;\n        callback(data);\n      });\n    } // Read a Unicode String (BVARCHAR)\n\n  }, {\n    key: \"readBVarChar\",\n    value: function readBVarChar(callback) {\n      var _this30 = this;\n\n      this.readUInt8(function (length) {\n        _this30.readBuffer(length * 2, function (data) {\n          callback(data.toString('ucs2'));\n        });\n      });\n    } // Read a Unicode String (USVARCHAR)\n\n  }, {\n    key: \"readUsVarChar\",\n    value: function readUsVarChar(callback) {\n      var _this31 = this;\n\n      this.readUInt16LE(function (length) {\n        _this31.readBuffer(length * 2, function (data) {\n          callback(data.toString('ucs2'));\n        });\n      });\n    } // Read binary data (BVARBYTE)\n\n  }, {\n    key: \"readBVarByte\",\n    value: function readBVarByte(callback) {\n      var _this32 = this;\n\n      this.readUInt8(function (length) {\n        _this32.readBuffer(length, callback);\n      });\n    } // Read binary data (USVARBYTE)\n\n  }, {\n    key: \"readUsVarByte\",\n    value: function readUsVarByte(callback) {\n      var _this33 = this;\n\n      this.readUInt16LE(function (length) {\n        _this33.readBuffer(length, callback);\n      });\n    }\n  }]);\n\n  return Parser;\n}(_readableStream.Transform);\n\nvar _default = Parser;\nexports.default = _default;\nmodule.exports = Parser;","map":{"version":3,"sources":["D:/Bakery/Bakery_ReactjsSourceCode/node_modules/tedious/lib/token/stream-parser.js"],"names":["Object","defineProperty","exports","value","default","_jsbi","_interopRequireDefault","require","_readableStream","_token","_colmetadataTokenParser","_doneTokenParser","_envChangeTokenParser","_infoerrorTokenParser","_fedauthInfoParser","_featureExtAckParser","_loginackTokenParser","_orderTokenParser","_returnstatusTokenParser","_returnvalueTokenParser","_rowTokenParser","_nbcrowTokenParser","_sspiTokenParser","obj","__esModule","tokenParsers","TYPE","COLMETADATA","DONE","doneParser","DONEINPROC","doneInProcParser","DONEPROC","doneProcParser","ENVCHANGE","ERROR","errorParser","FEDAUTHINFO","FEATUREEXTACK","INFO","infoParser","LOGINACK","ORDER","RETURNSTATUS","RETURNVALUE","ROW","NBCROW","SSPI","EndOfMessageMarker","Parser","debug","options","objectMode","colMetadata","endOfMessageMarker","buffer","position","suspended","next","Buffer","alloc","undefined","input","_encoding","done","EndOfMessageToken","length","concat","slice","parseTokens","doneParsing","token","ColMetadataToken","columns","push","type","readUInt8","emit","Error","callback","suspend","awaitData","data","readInt8","readInt16LE","readInt16BE","readUInt16LE","readUInt16BE","readInt32LE","readInt32BE","readUInt32LE","readUInt32BE","result","add","leftShift","BigInt","Math","pow","low","high","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","dword1","dword2","dword3","dword4","readBuffer","toString","Transform","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _jsbi = _interopRequireDefault(require(\"jsbi\"));\n\nvar _readableStream = require(\"readable-stream\");\n\nvar _token = require(\"./token\");\n\nvar _colmetadataTokenParser = _interopRequireDefault(require(\"./colmetadata-token-parser\"));\n\nvar _doneTokenParser = require(\"./done-token-parser\");\n\nvar _envChangeTokenParser = _interopRequireDefault(require(\"./env-change-token-parser\"));\n\nvar _infoerrorTokenParser = require(\"./infoerror-token-parser\");\n\nvar _fedauthInfoParser = _interopRequireDefault(require(\"./fedauth-info-parser\"));\n\nvar _featureExtAckParser = _interopRequireDefault(require(\"./feature-ext-ack-parser\"));\n\nvar _loginackTokenParser = _interopRequireDefault(require(\"./loginack-token-parser\"));\n\nvar _orderTokenParser = _interopRequireDefault(require(\"./order-token-parser\"));\n\nvar _returnstatusTokenParser = _interopRequireDefault(require(\"./returnstatus-token-parser\"));\n\nvar _returnvalueTokenParser = _interopRequireDefault(require(\"./returnvalue-token-parser\"));\n\nvar _rowTokenParser = _interopRequireDefault(require(\"./row-token-parser\"));\n\nvar _nbcrowTokenParser = _interopRequireDefault(require(\"./nbcrow-token-parser\"));\n\nvar _sspiTokenParser = _interopRequireDefault(require(\"./sspi-token-parser\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst tokenParsers = {\n  [_token.TYPE.COLMETADATA]: _colmetadataTokenParser.default,\n  [_token.TYPE.DONE]: _doneTokenParser.doneParser,\n  [_token.TYPE.DONEINPROC]: _doneTokenParser.doneInProcParser,\n  [_token.TYPE.DONEPROC]: _doneTokenParser.doneProcParser,\n  [_token.TYPE.ENVCHANGE]: _envChangeTokenParser.default,\n  [_token.TYPE.ERROR]: _infoerrorTokenParser.errorParser,\n  [_token.TYPE.FEDAUTHINFO]: _fedauthInfoParser.default,\n  [_token.TYPE.FEATUREEXTACK]: _featureExtAckParser.default,\n  [_token.TYPE.INFO]: _infoerrorTokenParser.infoParser,\n  [_token.TYPE.LOGINACK]: _loginackTokenParser.default,\n  [_token.TYPE.ORDER]: _orderTokenParser.default,\n  [_token.TYPE.RETURNSTATUS]: _returnstatusTokenParser.default,\n  [_token.TYPE.RETURNVALUE]: _returnvalueTokenParser.default,\n  [_token.TYPE.ROW]: _rowTokenParser.default,\n  [_token.TYPE.NBCROW]: _nbcrowTokenParser.default,\n  [_token.TYPE.SSPI]: _sspiTokenParser.default\n};\n\nclass EndOfMessageMarker {}\n\nclass Parser extends _readableStream.Transform {\n  constructor(debug, options) {\n    super({\n      objectMode: true\n    });\n    this.debug = void 0;\n    this.colMetadata = void 0;\n    this.options = void 0;\n    this.endOfMessageMarker = void 0;\n    this.buffer = void 0;\n    this.position = void 0;\n    this.suspended = void 0;\n    this.next = void 0;\n    this.debug = debug;\n    this.colMetadata = [];\n    this.options = options;\n    this.endOfMessageMarker = new EndOfMessageMarker();\n    this.buffer = Buffer.alloc(0);\n    this.position = 0;\n    this.suspended = false;\n    this.next = undefined;\n  }\n\n  _transform(input, _encoding, done) {\n    if (input instanceof EndOfMessageMarker) {\n      return done(undefined, new _token.EndOfMessageToken());\n    }\n\n    if (this.position === this.buffer.length) {\n      this.buffer = input;\n    } else {\n      this.buffer = Buffer.concat([this.buffer.slice(this.position), input]);\n    }\n\n    this.position = 0;\n\n    if (this.suspended) {\n      // Unsuspend and continue from where ever we left off.\n      this.suspended = false;\n      const next = this.next;\n      next();\n    } // If we're no longer suspended, parse new tokens\n\n\n    if (!this.suspended) {\n      // Start the parser\n      this.parseTokens();\n    }\n\n    done();\n  }\n\n  parseTokens() {\n    const doneParsing = token => {\n      if (token) {\n        if (token instanceof _token.ColMetadataToken) {\n          this.colMetadata = token.columns;\n        }\n\n        this.push(token);\n      }\n    };\n\n    while (!this.suspended && this.position + 1 <= this.buffer.length) {\n      const type = this.buffer.readUInt8(this.position);\n      this.position += 1;\n\n      if (tokenParsers[type]) {\n        tokenParsers[type](this, this.options, doneParsing);\n      } else {\n        this.emit('error', new Error('Unknown type: ' + type));\n      }\n    }\n  }\n\n  suspend(next) {\n    this.suspended = true;\n    this.next = next;\n  }\n\n  awaitData(length, callback) {\n    if (this.position + length <= this.buffer.length) {\n      callback();\n    } else {\n      this.suspend(() => {\n        this.awaitData(length, callback);\n      });\n    }\n  }\n\n  readInt8(callback) {\n    this.awaitData(1, () => {\n      const data = this.buffer.readInt8(this.position);\n      this.position += 1;\n      callback(data);\n    });\n  }\n\n  readUInt8(callback) {\n    this.awaitData(1, () => {\n      const data = this.buffer.readUInt8(this.position);\n      this.position += 1;\n      callback(data);\n    });\n  }\n\n  readInt16LE(callback) {\n    this.awaitData(2, () => {\n      const data = this.buffer.readInt16LE(this.position);\n      this.position += 2;\n      callback(data);\n    });\n  }\n\n  readInt16BE(callback) {\n    this.awaitData(2, () => {\n      const data = this.buffer.readInt16BE(this.position);\n      this.position += 2;\n      callback(data);\n    });\n  }\n\n  readUInt16LE(callback) {\n    this.awaitData(2, () => {\n      const data = this.buffer.readUInt16LE(this.position);\n      this.position += 2;\n      callback(data);\n    });\n  }\n\n  readUInt16BE(callback) {\n    this.awaitData(2, () => {\n      const data = this.buffer.readUInt16BE(this.position);\n      this.position += 2;\n      callback(data);\n    });\n  }\n\n  readInt32LE(callback) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readInt32LE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readInt32BE(callback) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readInt32BE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readUInt32LE(callback) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readUInt32LE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readUInt32BE(callback) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readUInt32BE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readBigInt64LE(callback) {\n    this.awaitData(8, () => {\n      const result = _jsbi.default.add(_jsbi.default.leftShift(_jsbi.default.BigInt(this.buffer[this.position + 4] + this.buffer[this.position + 5] * 2 ** 8 + this.buffer[this.position + 6] * 2 ** 16 + (this.buffer[this.position + 7] << 24) // Overflow\n      ), _jsbi.default.BigInt(32)), _jsbi.default.BigInt(this.buffer[this.position] + this.buffer[this.position + 1] * 2 ** 8 + this.buffer[this.position + 2] * 2 ** 16 + this.buffer[this.position + 3] * 2 ** 24));\n\n      this.position += 8;\n      callback(result);\n    });\n  }\n\n  readInt64LE(callback) {\n    this.awaitData(8, () => {\n      const data = Math.pow(2, 32) * this.buffer.readInt32LE(this.position + 4) + ((this.buffer[this.position + 4] & 0x80) === 0x80 ? 1 : -1) * this.buffer.readUInt32LE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readInt64BE(callback) {\n    this.awaitData(8, () => {\n      const data = Math.pow(2, 32) * this.buffer.readInt32BE(this.position) + ((this.buffer[this.position] & 0x80) === 0x80 ? 1 : -1) * this.buffer.readUInt32BE(this.position + 4);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readBigUInt64LE(callback) {\n    this.awaitData(8, () => {\n      const low = _jsbi.default.BigInt(this.buffer.readUInt32LE(this.position));\n\n      const high = _jsbi.default.BigInt(this.buffer.readUInt32LE(this.position + 4));\n\n      this.position += 8;\n      callback(_jsbi.default.add(low, _jsbi.default.leftShift(high, _jsbi.default.BigInt(32))));\n    });\n  }\n\n  readUInt64LE(callback) {\n    this.awaitData(8, () => {\n      const data = Math.pow(2, 32) * this.buffer.readUInt32LE(this.position + 4) + this.buffer.readUInt32LE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readUInt64BE(callback) {\n    this.awaitData(8, () => {\n      const data = Math.pow(2, 32) * this.buffer.readUInt32BE(this.position) + this.buffer.readUInt32BE(this.position + 4);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readFloatLE(callback) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readFloatLE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readFloatBE(callback) {\n    this.awaitData(4, () => {\n      const data = this.buffer.readFloatBE(this.position);\n      this.position += 4;\n      callback(data);\n    });\n  }\n\n  readDoubleLE(callback) {\n    this.awaitData(8, () => {\n      const data = this.buffer.readDoubleLE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readDoubleBE(callback) {\n    this.awaitData(8, () => {\n      const data = this.buffer.readDoubleBE(this.position);\n      this.position += 8;\n      callback(data);\n    });\n  }\n\n  readUInt24LE(callback) {\n    this.awaitData(3, () => {\n      const low = this.buffer.readUInt16LE(this.position);\n      const high = this.buffer.readUInt8(this.position + 2);\n      this.position += 3;\n      callback(low | high << 16);\n    });\n  }\n\n  readUInt40LE(callback) {\n    this.awaitData(5, () => {\n      const low = this.buffer.readUInt32LE(this.position);\n      const high = this.buffer.readUInt8(this.position + 4);\n      this.position += 5;\n      callback(0x100000000 * high + low);\n    });\n  }\n\n  readUNumeric64LE(callback) {\n    this.awaitData(8, () => {\n      const low = this.buffer.readUInt32LE(this.position);\n      const high = this.buffer.readUInt32LE(this.position + 4);\n      this.position += 8;\n      callback(0x100000000 * high + low);\n    });\n  }\n\n  readUNumeric96LE(callback) {\n    this.awaitData(12, () => {\n      const dword1 = this.buffer.readUInt32LE(this.position);\n      const dword2 = this.buffer.readUInt32LE(this.position + 4);\n      const dword3 = this.buffer.readUInt32LE(this.position + 8);\n      this.position += 12;\n      callback(dword1 + 0x100000000 * dword2 + 0x100000000 * 0x100000000 * dword3);\n    });\n  }\n\n  readUNumeric128LE(callback) {\n    this.awaitData(16, () => {\n      const dword1 = this.buffer.readUInt32LE(this.position);\n      const dword2 = this.buffer.readUInt32LE(this.position + 4);\n      const dword3 = this.buffer.readUInt32LE(this.position + 8);\n      const dword4 = this.buffer.readUInt32LE(this.position + 12);\n      this.position += 16;\n      callback(dword1 + 0x100000000 * dword2 + 0x100000000 * 0x100000000 * dword3 + 0x100000000 * 0x100000000 * 0x100000000 * dword4);\n    });\n  } // Variable length data\n\n\n  readBuffer(length, callback) {\n    this.awaitData(length, () => {\n      const data = this.buffer.slice(this.position, this.position + length);\n      this.position += length;\n      callback(data);\n    });\n  } // Read a Unicode String (BVARCHAR)\n\n\n  readBVarChar(callback) {\n    this.readUInt8(length => {\n      this.readBuffer(length * 2, data => {\n        callback(data.toString('ucs2'));\n      });\n    });\n  } // Read a Unicode String (USVARCHAR)\n\n\n  readUsVarChar(callback) {\n    this.readUInt16LE(length => {\n      this.readBuffer(length * 2, data => {\n        callback(data.toString('ucs2'));\n      });\n    });\n  } // Read binary data (BVARBYTE)\n\n\n  readBVarByte(callback) {\n    this.readUInt8(length => {\n      this.readBuffer(length, callback);\n    });\n  } // Read binary data (USVARBYTE)\n\n\n  readUsVarByte(callback) {\n    this.readUInt16LE(length => {\n      this.readBuffer(length, callback);\n    });\n  }\n\n}\n\nvar _default = Parser;\nexports.default = _default;\nmodule.exports = Parser;"]},"metadata":{},"sourceType":"script"}